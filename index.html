<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Lit + TS</title>
    <link rel="stylesheet" href="./src/index.css" />
    <script type="module" src="/src/index.ts"></script>
<!--     <script type="module" src="/src/as-box.ts"></script>
    <script type="module" src="/src/as-button.ts"></script>
    <script type="module" src="/src/as-input.ts"></script>
    <script type="module" src="/src/as-check.ts"></script>
    <script type="module" src="/src/as-radio.ts"></script>
    <script type="module" src="/src/as-select.ts"></script>
 -->  </head>
  <body>
    <as-box>
      <as-input label="Name" value="John"></as-input>
      <as-input label="Last Name" value="Doe"></as-input>
      <as-text label="Comments" rows="3" placeholder="Enter your comments"></as-text>
      <as-date label="Birth Date" placeholder="Select date"></as-date>
      <as-time label="Meeting Time" placeholder="Select time"></as-time>
      <as-check label="Check me"></as-check>
      <as-switch label="Switch me"></as-switch>
      <as-radio options="label=A,value=A;label=B,value=B;label=C,value=C"></as-radio>
      <as-select options="label=A,value=A;label=B,value=B;label=C,value=C"></as-select>
      <as-complete label="Buscar" options="label=JavaScript,value=js;label=TypeScript,value=ts;label=Python,value=py;label=Java,value=java"></as-complete>
      <as-event id="eventField" label="Acciones" value="Seleccionar acción" event="show-menu"></as-event>
      <as-form id="userForm"></as-form>
      <as-confirm label="Tap me" message="Hey there!"></as-confirm>
      <as-datagrid id="table" actionable></as-datagrid>
    </as-box>
    <script type="module">
      const table = document.getElementById('table');
      table.data = Array.from({length: 57}, (_, i) => ({
        id: i + 1,
        name: `Usuario ${i + 1}`,
        email: `user${i + 1}@ejemplo.com`,
        role: ['Admin', 'Editor', 'Viewer'][Math.floor(Math.random()*3)],
        status: Math.random() > 0.5 ? 'Activo' : 'Inactivo'
      }));
      table.columns = [
        { key: 'name', header: 'Nombre' },
        { key: 'email', header: 'Correo' },
        { key: 'role', header: 'Rol' },
        { key: 'status', header: 'Estado' }
      ];
      table.selectable = true;
      table.filterable = true;
      table.pageable = true;
      // Crear popup menu
      const popup = document.createElement('as-popup');
      popup.options = 'label=Editar,value=edit;label=Duplicar,value=duplicate;label=Eliminar,value=delete';
      document.body.appendChild(popup);
      
      table.addEventListener('row-action', (e) => {
        console.log('Action on row:', e.detail);
        const mouseEvent = e.detail.event;
        popup.show(mouseEvent.clientX, mouseEvent.clientY);
        
        // Guardar referencia de la fila para usar en el evento
        popup._currentRow = e.detail.row;
      });
      
      popup.addEventListener('option-select', (e) => {
        const action = e.detail.value;
        const row = popup._currentRow;
        alert(`${e.detail.label}: ${row.name}`);
      });
      
      // Ejemplo de as-event con as-popup
      const eventField = document.getElementById('eventField');
      const eventPopup = document.createElement('as-popup');
      eventPopup.options = 'label=Configurar,value=config;label=Exportar,value=export;label=Resetear,value=reset';
      document.body.appendChild(eventPopup);
      
      eventField.addEventListener('show-menu', (e) => {
        // Obtener posición del campo as-event
        const rect = eventField.getBoundingClientRect();
        eventPopup.show(rect.right, rect.bottom);
      });
      
      eventPopup.addEventListener('option-select', (e) => {
        eventField.value = e.detail.label;
        alert(`Acción seleccionada: ${e.detail.label}`);
      });
      
      // Ejemplo de as-form
      const userForm = document.getElementById('userForm');
      userForm.schema = {
        title: 'User Registration',
        sections: [
          {
            title: 'Personal Information',
            fields: [
              {
                name: 'firstName',
                type: 'text',
                label: 'First Name',
                required: true,
                validation: ['required', 'min:2']
              },
              {
                name: 'lastName',
                type: 'text',
                label: 'Last Name',
                required: true,
                validation: ['required', 'min:2']
              },
              {
                name: 'email',
                type: 'email',
                label: 'Email',
                required: true,
                validation: ['required', 'email']
              }
            ]
          },
          {
            title: 'Preferences',
            fields: [
              {
                name: 'newsletter',
                type: 'switch',
                label: 'Subscribe to newsletter'
              },
              {
                name: 'role',
                type: 'select',
                label: 'Role',
                options: [
                  { label: 'User', value: 'user' },
                  { label: 'Admin', value: 'admin' },
                  { label: 'Editor', value: 'editor' }
                ]
              }
            ]
          }
        ]
      };
      
      userForm.addEventListener('form-submit', (e) => {
        console.log('Form submitted:', e.detail.formData);
        alert('Form submitted successfully!');
      });
      
      userForm.addEventListener('form-cancel', () => {
        alert('Form cancelled');
      });
    </script>
  </body>
</html>
